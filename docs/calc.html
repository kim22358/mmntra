<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flow of a Falling Film Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
  body.settings {
    background-image: url('../assets/images/bg2.png');
    background-size: cover;
    background-position: center;
    background-attachment: scroll;
    color: white;
  }
</style>

</head>
<body
  class="bg-cover bg-center bg-scroll text-white flex"
  style="background-image: url('assets/images/bg2.png');"
>

   
<!-- Add this in your <head> -->
<script>
  function toggleSidebar() {
    const sidebar = document.getElementById("sidebar");
    sidebar.classList.toggle("w-48");
    sidebar.classList.toggle("w-16");

    const labels = sidebar.querySelectorAll(".nav-label");
    labels.forEach(label => label.classList.toggle("hidden"));
  }

  function openNewTab() {
    window.open("calc.html", "_blank");
  }
</script>

<!-- Sidebar -->
<div id="sidebar" class="h-screen w-16 transition-all duration-300 bg-gradient-to-b from-[#27244b] to-[#05031a] fixed flex flex-col items-start px-2 py-6 space-y-6">
  
  <!-- App Icon -->
  <!-- Load Track font -->
    <style>
    @font-face {
      font-family: 'Track';
      src: url('assets/fonts/track/track.otf') format('opentype');
    }
    font-track {
      font-family: 'Track', sans-serif;
    }
  </style>

  <div class="w-full flex items-center justify-center mb-8 space-x-3">
    <img src="assets/images/logo high res.png" alt="Logo" class="w-8 h-8 object-contain" />
    <span class="nav-label hidden text-3xl font-track">WAVE</span>
  </div>

  <style>
    @font-face {
      font-family: 'Track';
      src: url('assets/fonts/track/track.otf') format('opentype');
      font-weight: normal;
      font-style: normal;
    }

    .font-track {
      font-family: 'Track', sans-serif;
    }
  </style>


  <!-- Navigation -->
  <nav class="flex flex-col items-start space-y-4 w-full">
    
    <!-- Home Button -->
    <button onclick="window.location.href='index.html'" class="flex items-center space-x-3 group text-white w-full px-2 hover:bg-white/10 rounded py-2">
      <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0h6" />
      </svg>
      <span class="nav-label hidden text-sm">Home</span>
    </button>

    <!-- Input / New Calculation -->
    <button onclick="openNewTab()" class="flex items-center space-x-3 group text-white w-full px-2 hover:bg-white/10 rounded py-2">
      <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path d="M12 4v16m8-8H4" />
      </svg>
      <span class="nav-label hidden text-sm">New Tab</span>
    </button>

    <!-- History -->
<button onclick="window.location.href='history.html'" class="flex items-center space-x-3 group text-white w-full px-2 hover:bg-white/10 rounded py-2">
  <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
  </svg>
  <span class="nav-label hidden text-sm">History</span>
</button>

    <!-- Settings -->
<button onclick="window.location.href='settings.html'" class="flex items-center space-x-3 group text-white w-full px-2 hover:bg-white/10 rounded py-2 mt-6">
  <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path d="M11.25 2.25v1.5m0 16.5v1.5M4.219 4.219l1.061 1.061M18.72 18.72l1.06 1.061M2.25 11.25h1.5m16.5 0h1.5M4.219 18.72l1.061-1.06M18.72 5.28l1.06-1.061M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
  </svg>
  <span class="nav-label hidden text-sm">Settings</span>
</button>


  <!-- Collapse Button -->
  <div class="mt-auto w-full flex justify-center pt-4">
    <button onclick="toggleSidebar()" class="text-white opacity-60 hover:opacity-100">
      <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path d="M19 12H5" />
      </svg>
    </button>
  </div>
</div>


   <!-- Main Content -->
    <div class="flex-1 px-8 py-10">
      <h1 class="text-center text-3xl font-bold text-pink-400 mb-8">Flow of a Falling Film Calculator</h1>

      
<!-- Fluid Selector -->
<div class="flex justify-center mb-8">
  <div class="relative w-full max-w-md">
    <select id="fluid" class="block w-full appearance-none text-center bg-white text-gray-800 font-semibold rounded-full bg-opacity-80 py-3 pl-6 pr-10 shadow-md focus:outline-none focus:ring-2 focus:ring-violet-900 focus:border-violet-900 transition duration-200">
      <option value="">Select Fluid</option>
      <option value="Acetone">Acetone</option>
      <option value="Air">Air</option>
      <option value="Ammonia">Ammonia</option>
      <option value="Benzene">Benzene</option>
      <option value="CarbonDioxide">Carbon Dioxide</option>
      <option value="CarbonTetrachloride">Carbon Tetrachloride</option>
      <option value="Chloroform">Chloroform</option>
      <option value="Ethanol">Ethanol</option>
      <option value="EthyleneGlycol">Ethylene Glycol</option>
      <option value="Glycerin">Glycerin</option>
      <option value="Helium">Helium</option>
      <option value="Hydrogen">Hydrogen</option>
      <option value="Isopropanol">Isopropanol</option>
      <option value="Kerosene">Kerosene</option>
      <option value="Methanol">Methanol</option>
      <option value="Nitrogen">Nitrogen</option>
      <option value="Octane">Octane</option>
      <option value="Oil">Oil</option>
      <option value="Oxygen">Oxygen</option>
      <option value="PropyleneGlycol">Propylene Glycol</option>
      <option value="Steam">Steam</option>
      <option value="SulfurDioxide">Sulfur Dioxide</option>
      <option value="Toluene">Toluene</option>
      <option value="Water">Water</option>
      <option value="Xylene">Xylene</option>
    </select>



   <!-- Centered Dropdown with Custom Arrow -->
<div class="relative w-60 mx-auto mt-8">
  <select id="operationType" class="block w-full appearance-none text-center bg-white text-gray-800 font-semibold rounded-full bg-opacity-80 py-3 pl-6 pr-10 shadow-md focus:outline-none focus:ring-2 focus:ring-violet-900 focus:border-violet-900 transition duration-200">
    <option value="heating">Heating</option>
    <option value="cooling">Cooling</option>
    <option value="evaporation">Evaporation</option>
    <option value="condensation">Condensation</option>
  </select>
  <!-- Custom Arrow -->
  <div class="pointer-events-none absolute inset-y-0 right-4 flex items-center to-black">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"
      stroke-linecap="round" stroke-linejoin="round">
      <path d="M19 9l-7 7-7-7" />
    </svg>
  </div>
</div>

<br />

<!-- Inputs -->
<div class="max-w-xl mx-auto space-y-4">
  <div>
    <label class="text-sm">FILM THICKNESS (m)</label>
    <input id="film" type="number" class="w-full p-2 rounded-2xl bg-white/10" />
  </div>
  <div>
    <label class="text-sm">FLOWRATE PER UNIT WIDTH (kg/s·m)</label>
    <input id="flowrate" type="number" class="w-full p-2 rounded-2xl bg-white/10" />
  </div>
  <div>
    <label class="text-sm">LENGTH (m)</label>
    <input id="length" type="number" class="w-full p-2 rounded-2xl bg-white/10" />
  </div>
  <div>
    <label class="text-sm">TEMPERATURE DIFFERENCE (K)</label>
    <input id="temp" type="number" class="w-full p-2 rounded-2xl bg-white/10" />
  </div>
  <div>
    <label class="text-sm">THERMAL CONDUCTIVITY (W/m·K)</label>
    <input id="k" type="number" class="w-full p-2 rounded-2xl bg-white/10" />
  </div>
</div>

<br />

<!-- Buttons -->
<button onclick="calculate()"
  class="w-full py-3 bg-gradient-to-r from-blue-900 to-purple-600 text-white font-extrabold rounded-full shadow-md hover:from-blue-500 hover:to-purple-300 hover:shadow-lg transition duration-200 ease-in-out">
  CALCULATE
</button>


<br />

<!-- Outputs -->
<div id="results" class="hidden space-y-4 mt-4">
  <div class="bg-gradient-to-r from-purple-700 to-purple-400 p-4 rounded-xl border border-white/30 shadow-md">
    <p class="text-xs text-white">HEAT TRANSFER COEFFICIENT (W/m²·K)</p>
    <p id="hTCoff" class="text-cyan-300 font-bold text-lg">-</p>
  </div>
  <div class="bg-gradient-to-r from-purple-700 to-purple-400 p-4 rounded-xl border border-white/30 shadow-md">
    <p class="text-xs text-white">HEAT TRANSFER RATE (W)</p>
    <p id="hTRate" class="text-cyan-300 font-bold text-lg">-</p>
  </div>
  <div class="bg-gradient-to-r from-purple-700 to-purple-400 p-4 rounded-xl border border-white/30 shadow-md">
    <p class="text-xs text-white">REYNOLDS NUMBER</p>
    <p id="Re" class="text-cyan-300 font-bold text-lg">-</p>
  </div>
  <div class="bg-gradient-to-r from-purple-700 to-purple-400 p-4 rounded-xl border border-white/30 shadow-md">
    <p class="text-xs text-white">PRANDTL NUMBER</p>
    <p id="Pr" class="text-cyan-300 font-bold text-lg">-</p>
  </div>

  <!-- Smart Recommendations -->
  <div id="recommendations" class="hidden space-y-4 mt-6">
    <h2 class="text-lg font-bold text-pink-400">Smart Recommendations</h2>
    <div id="fluidSuggestion" class="text-sm text-white"></div>
    <div id="wallTempSuggestion" class="text-sm text-white"></div>
    <div id="flowrateSuggestion" class="text-sm text-white"></div>
  </div>
</div>

<!-- JS Logic -->
<script>
  function calculate() {
    const tempDiff = parseFloat(document.getElementById("temp").value);
    const flow = parseFloat(document.getElementById("flowrate").value);
    const processGoal = document.getElementById("operationType").value;
    const bestFluid = "Water"; // Replace with your logic
    const bestH = 300; // Replace with your calculated value

    let recommendedTempDiff;
    let recommendedFlow;

    switch (processGoal.toLowerCase()) {
      case "heating":
        recommendedTempDiff = Math.min(60, tempDiff * 1.25);
        recommendedFlow = flow * 1.1;
        break;
      case "cooling":
        recommendedTempDiff = Math.min(50, tempDiff * 1.2);
        recommendedFlow = flow * 1.15;
        break;
      case "evaporation":
        recommendedTempDiff = Math.min(80, tempDiff * 1.3);
        recommendedFlow = flow * 1.05;
        break;
      case "condensation":
        recommendedTempDiff = Math.min(30, tempDiff * 1.1);
        recommendedFlow = flow * 1.2;
        break;
      default:
        recommendedTempDiff = Math.min(50, tempDiff * 1.2);
        recommendedFlow = flow * 1.1;
    }

    document.getElementById("wallTempSuggestion").textContent =
      `🌡️ For ${processGoal}, consider targeting ΔT ≈ ${recommendedTempDiff.toFixed(1)} K.`;

    document.getElementById("flowrateSuggestion").textContent =
      `💧 A flowrate of ≈ ${recommendedFlow.toFixed(2)} kg/s·m may improve performance for ${processGoal}.`;

    document.getElementById("recommendations").classList.remove("hidden");
    document.getElementById("results").classList.remove("hidden");
  }
</script>


<!-- New Clear All Button -->
<button onclick="clearAll()" 
  class="w-full py-2 mt-2 rounded-full font-bold text-sm text-white bg-gradient-to-r from-pink-900 to-fuchsia-200 shadow-md hover:from-red-400 hover:to-pink-300 transition duration-200 ease-in-out">
  CLEAR ALL
</button>
<br/>
<body class="p-4">
<br/>
<label class="text-sm justify-center">_______________________________________________________________________________</label>
<br/>
<br/>
 <!-- Input fields -->
<div class="max-w-xl mx-auto space-y-4">
  <div>
    <label class="text-sm">FLUID TEMPERATURE (K)</label>
    <input id="temperature" type="number" class="w-full p-2 rounded-2xl bg-white/10" />
  </div>
  <div>
    <label class="text-sm">GAUGE PRESSURE (Pa)</label>
    <input id="pressure" type="number" class="w-full p-2 rounded-2xl bg-white/10" />
  </div>
  <div>
    <label class="text-sm">LENGTH (m)</label>
    <input id="length" type="number" class="w-full p-2 rounded-2xl bg-white/10" />
  </div>
  <div>
    <label class="text-sm">VELOCITY (m/s)</label>
    <input id="velocity" type="number" class="w-full p-2 rounded-2xl bg-white/10" />
  </div>
  <div>
    <label class="text-sm">REYNOLDS NUMBER</label>
    <input id="reynolds" type="number" class="w-full p-2 rounded-2xl bg-white/10" />
  </div>
</div>

<br />

<!-- Button to check alerts -->
<button onclick="showAlerts()"
  class="w-full py-2 mt-2 rounded-full font-bold text-sm text-white bg-gradient-to-r from-orange-300 to-red-600 shadow-md hover:from-red-400 hover:to-pink-300 transition duration-200 ease-in-out">
  Check Safety Alerts
</button>

<!-- Container for the alerts -->
<div id="alertsContainer" class="max-w-xl mx-auto mt-4 text-sm text-white space-y-2"></div>

<script>
  function showAlerts() {
    const temperature = parseFloat(document.getElementById('temperature').value) || 0;
    const pressureGauge = parseFloat(document.getElementById('pressure').value) || 0;
    const velocity = parseFloat(document.getElementById('velocity').value) || 0;
    const reynolds = parseFloat(document.getElementById('reynolds').value) || 0;

       // Convert gauge pressure to absolute pressure
    const atmosphericPressure = 101325; // Pa
    const absolutePressure = pressureGauge + atmosphericPressure;

    const calculatedValues = {
      temperature,
      pressureGauge,
      absolutePressure,
      velocity,
      reynolds
    };
    localStorage.setItem('calculatedValues', JSON.stringify(calculatedValues));

    let alerts = '';

    // Temperature checks (in Kelvin)
    if (temperature > 393.15) {
      alerts += '<p>⚠️ High Temperature! Use heat-resistant materials or cooling systems.</p>';
    } else if (temperature < 273.15) {
      alerts += '<p>⚠️ Sub-zero Temperature! Apply antifreeze measures or insulation.</p>';
    }

    // Absolute Pressure checks
    if (pressure > 2000000) {
      alerts += '<p>⚠️ Very High Pressure! Exceeds standard industrial design. Reinforced equipment and relief valves required.</p>';
    } else if (pressure > 500000) {
      alerts += '<p>⚠️ High Pressure! Ensure all components are rated above 5 bar (500,000 Pa).</p>';
    } else if (pressure < 90000) {
      alerts += '<p>⚠️ Low Pressure or Vacuum Condition. Verify system is suitable for negative or low pressures.</p>';
    }

    // Velocity checks
    if (velocity > 30) {
      alerts += '<p>⚠️ Excessive Flow Velocity! May cause erosion or pressure drop issues.</p>';
    } else if (velocity < 0.3) {
      alerts += '<p>⚠️ Low Flow Velocity. Risk of sediment buildup or poor transport efficiency.</p>';
    }

    // Reynolds number checks
    if (reynolds > 4000) {
      alerts += '<p>⚠️ Turbulent Flow (Re > 4000). Check for erosion and vibration.</p>';
    } else if (reynolds < 2000) {
      alerts += '<p>⚠️ Laminar Flow (Re < 2000). May affect heat and mass transfer.</p>';
    }

    if (alerts === '') {
      alerts = '<p>✅ All system parameters are within safe industrial design limits.</p>';
    }

    document.getElementById('alertsContainer').innerHTML = `
      <div class="p-4 rounded-xl bg-white/10 border border-white/20">${alerts}</div>
    `;
  }
</script>

  <script>
      const fluidProps = {
        Acetone: { cp: 2160, rho: 790, mu: 0.00032, k: 0.16 },
        Air: { cp: 1005, rho: 1.225, mu: 0.0000181, k: 0.0262 },
        Ammonia: { cp: 2060, rho: 682, mu: 0.00098, k: 0.51 },
        Benzene: { cp: 1724, rho: 876, mu: 0.000604, k: 0.15 },
        CarbonDioxide: { cp: 846, rho: 1.977, mu: 0.0000147, k: 0.0146 },
        CarbonTetrachloride: { cp: 855, rho: 1590, mu: 0.0009, k: 0.105 },
        Chloroform: { cp: 956, rho: 1489, mu: 0.00054, k: 0.148 },
        Ethanol: { cp: 2450, rho: 789, mu: 0.0012, k: 0.171 },
        EthyleneGlycol: { cp: 2415, rho: 1113, mu: 0.0161, k: 0.252 },
        Glycerin: { cp: 2400, rho: 1260, mu: 1.49, k: 0.28 },
        Helium: { cp: 5190, rho: 0.1786, mu: 0.000019, k: 0.1513 },
        Hydrogen: { cp: 14300, rho: 0.0899, mu: 0.0000089, k: 0.1805 },
        Isopropanol: { cp: 2560, rho: 786, mu: 0.002, k: 0.13 },
        Kerosene: { cp: 2100, rho: 780, mu: 0.00164, k: 0.13 },
        Methanol: { cp: 2540, rho: 792, mu: 0.00059, k: 0.21 },
        Nitrogen: { cp: 1040, rho: 1.251, mu: 0.0000179, k: 0.0258 },
        Octane: { cp: 2220, rho: 703, mu: 0.0005, k: 0.15 },
        Oil: { cp: 2000, rho: 800, mu: 0.05, k: 0.15 },
        Oxygen: { cp: 918, rho: 1.429, mu: 0.0000202, k: 0.0263 },
        PropyleneGlycol: { cp: 2400, rho: 1036, mu: 0.058, k: 0.22 },
        Steam: { cp: 2010, rho: 0.6, mu: 0.000013, k: 0.0184 },
        SulfurDioxide: { cp: 622, rho: 1.43, mu: 0.000013, k: 0.015 },
        Toluene: { cp: 1700, rho: 867, mu: 0.00059, k: 0.13 },
        Water: { cp: 4200, rho: 997, mu: 0.001, k: 0.6 },
        Xylene: { cp: 1700, rho: 860, mu: 0.00061, k: 0.15 },
      };


   function calculate() {
  const fluid = document.getElementById("fluid").value;
  const props = fluidProps[fluid];
  const flow = parseFloat(document.getElementById("flowrate").value);
  const tempDiff = parseFloat(document.getElementById("temp").value);
  const film = parseFloat(document.getElementById("film").value);
  const length = parseFloat(document.getElementById("length").value);

  if (!props || isNaN(flow) || isNaN(tempDiff) || isNaN(film) || isNaN(length)) return;

  const vel = flow / (props.rho * film);
  const Re = (props.rho * vel * length) / props.mu;
  const Pr = (props.cp * props.mu) / props.k;

  let Nu;
  if (Re < 1000) Nu = 0.664 * Math.sqrt(Re) * Math.cbrt(Pr);
  else if (Re <= 5000) Nu = 0.023 * Math.pow(Re, 0.8) * Math.cbrt(Pr);
  else Nu = 0.027 * Math.pow(Re, 0.8) * Math.cbrt(Pr);

  const hTC = (Nu * props.k) / length;
  const hTR = flow * props.cp * tempDiff;

  document.getElementById("hTCoff").textContent = hTC.toFixed(6);
  document.getElementById("hTRate").textContent = hTR.toFixed(6);
  document.getElementById("Re").textContent = Re.toFixed(2);
  document.getElementById("Pr").textContent = Pr.toFixed(2);
  document.getElementById("results").classList.remove("hidden");

  // Recommend best fluid for highest heat transfer coefficient
let bestFluid = null;
let bestH = 0;

Object.entries(fluidProps).forEach(([name, p]) => {
  const v = flow / (p.rho * film);
  const ReTest = (p.rho * v * length) / p.mu;
  const PrTest = (p.cp * p.mu) / p.k;

  let NuTest;
  if (ReTest < 1000) NuTest = 0.664 * Math.sqrt(ReTest) * Math.cbrt(PrTest);
  else if (ReTest <= 5000) NuTest = 0.023 * Math.pow(ReTest, 0.8) * Math.cbrt(PrTest);
  else NuTest = 0.027 * Math.pow(ReTest, 0.8) * Math.cbrt(PrTest);

  const hTest = (NuTest * p.k) / length;
  if (hTest > bestH) {
    bestH = hTest;
    bestFluid = name;
  }
});

// Recommend ideal wall temperature difference for optimal Q (~ within safe high efficiency)
let recommendedTempDiff = Math.min(50, tempDiff * 1.2); // Maximize to a safe 20% higher

// Recommend a slightly increased flowrate (if within practical range)
let recommendedFlow = flow * 1.1;

document.getElementById("wallTempSuggestion").textContent = `🌡️ Try increasing ΔT to around ${recommendedTempDiff.toFixed(1)} K for better efficiency.`;
document.getElementById("flowrateSuggestion").textContent = `💧 A flowrate of ≈ ${recommendedFlow.toFixed(2)} kg/s·m might improve heat transfer rate.`;

document.getElementById("recommendations").classList.remove("hidden");
  

  // Save to localStorage (inside calculate)
  const entry = {
    fluid,
    hTC: hTC.toFixed(6),
    hTR: hTR.toFixed(6),
    timestamp: new Date().toLocaleString()
  };

  let history = JSON.parse(localStorage.getItem("calcHistory")) || [];
  if (history.length >= 20) history.shift(); // Keep only 20
  history.push(entry);
  localStorage.setItem("calcHistory", JSON.stringify(history));
}

function clearAll() {
  ["fluid", "flowrate", "temp", "film", "length", "k"].forEach(id => document.getElementById(id).value = "");
  document.getElementById("results").classList.add("hidden");
  document.getElementById("recommendations").classList.add("hidden");
}

  </script>


</body>
</html>
